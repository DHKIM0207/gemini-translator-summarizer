<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="chatbotTitle">AI Translation & Summary</title>
  <link rel="stylesheet" href="chatbot.css">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  <script src="../lib/marked.min.js"></script>
</head>

<body>
  <div id="chatbot-container">
    <header id="chatbot-header">
      <div class="header-title">
        <span class="material-symbols-rounded">smart_toy</span>
        <h2 data-i18n="aiAssistant">AI Assistant</h2>
      </div>
      <div class="header-icons">
        <span class="material-symbols-rounded" id="fullscreen-btn" data-i18n-title="fullscreen">fullscreen</span>
        <span class="material-symbols-rounded hidden" id="fullscreen-exit-btn" data-i18n-title="fullscreenExit">fullscreen_exit</span>
        <span class="material-symbols-rounded" id="theme-toggle-btn" data-i18n-title="themeToggle">dark_mode</span>
        <span class="material-symbols-rounded" id="settings-btn" data-i18n-title="settings">settings</span>
        <span class="material-symbols-rounded" id="close-chatbot-btn" data-i18n-title="closeChatbot">close</span>
      </div>
    </header>

    <div id="api-key-section" class="hidden">
      <div class="settings-header">
        <h3 data-i18n="settings">Settings</h3>
        <button class="close-settings-btn" id="closeSettingsBtn">
          <span class="material-symbols-rounded">close</span>
        </button>
      </div>
      <div class="settings-container">
        <h3 data-i18n="apiKeySettings">API Key Settings</h3>
        <div class="input-group">
          <label for="apiKeyInput" data-i18n="saveApiKey">Gemini API Key</label>
          <input type="password" id="apiKeyInput" data-i18n-placeholder="apiKeyInputPlaceholder" placeholder="Enter your Gemini API key">
        </div>
        <button id="saveApiKeyBtn" data-i18n="saveApiKey">Save</button>
        <p id="apiKeyMsg"></p>
      </div>
      
      <div class="settings-container">
        <h3 data-i18n="languageSettings">Language Settings</h3>
        <div class="input-group">
          <label for="languageSelect" data-i18n="selectLanguage">Select Language</label>
          <select id="languageSelect">
            <option value="ko">한국어</option>
            <option value="en">English</option>
            <option value="ja">日本語</option>
            <option value="zh_CN">中文(简体)</option>
            <option value="de">Deutsch</option>
            <option value="es">Español</option>
            <option value="fr">Français</option>
          </select>
        </div>
      </div>
      
      <div class="settings-container">
        <h3 data-i18n="fontSettings">Font Settings</h3>
        <div class="input-group">
          <label for="fontSelect" data-i18n="selectFont">Select Font</label>
          <select id="fontSelect">
            <option value="" data-i18n="defaultFont">Default Font</option>
          </select>
        </div>
        <div class="input-group">
          <label for="fontSizeSlider"><span data-i18n="fontSize">Font Size</span>: <span id="fontSizeValue">14</span>px</label>
          <input type="range" id="fontSizeSlider" min="12" max="20" value="14" step="1">
        </div>
        <button id="saveFontSettingsBtn" data-i18n="saveFontSettings">Save Font Settings</button>
      </div>
    </div>

    <div id="chat-actions-predefined">
      <button id="summarizePageBtn">
        <span class="material-symbols-rounded">summarize</span>
        <span data-i18n="summarizePageButton">Summarize Page</span>
      </button>
      <button id="translatePageBtn">
        <span class="material-symbols-rounded">translate</span>
        <span data-i18n="translatePageButton">Translate Page</span>
      </button>
      <button id="translateSelectionBtn">
        <span class="material-symbols-rounded">text_select_end</span>
        <span data-i18n="translateSelectedText">Translate Selected</span>
      </button>
    </div>

    <div id="chat-messages">
      <div class="message bot-message">
        <div class="message-avatar">
          <span class="material-symbols-rounded">smart_toy</span>
        </div>
        <div class="message-content">
          <p data-i18n="welcomeMessage">Hello! How can I help you? Use the 'Summarize Page' or 'Translate Page' buttons for the entire page, 'Translate Selected' for selected text, or type your message directly.</p>
        </div>
      </div>
    </div>

    <div id="image-preview-container" class="hidden">
      <div id="image-preview-wrapper">
        <img id="image-preview" src="" data-i18n-alt="imagePreview" alt="Preview">
        <button id="remove-image" data-i18n-title="removeImage" title="Remove Image">
          <span class="material-symbols-rounded">close</span>
        </button>
      </div>
    </div>

    <div id="chat-input-container">
      <div id="search-toggle-container">
        <label class="search-toggle-label">
          <input type="checkbox" id="searchToggle" class="search-toggle-checkbox">
          <span class="search-toggle-slider">
            <span class="material-symbols-rounded search-icon">search</span>
            <span class="toggle-text" data-i18n="searchToggle">웹 검색</span>
          </span>
        </label>
      </div>
      <div id="chat-input-area">
        <textarea id="userInput" data-i18n-placeholder="messageInputPlaceholder" placeholder="Enter your message..."></textarea>
        <button id="image-upload-btn" data-i18n-title="attachImage" title="Attach Image">
          <span class="material-symbols-rounded">image</span>
        </button>
        <input type="file" id="image-file-input" accept="image/*" class="hidden">
        <button id="sendBtn">
          <span class="material-symbols-rounded">send</span>
        </button>
      </div>
    </div>
    <div id="loader" class="hidden"></div>
    <div id="toast-container"></div>
  </div>
  <script type="module" src="chatbot.js"></script>
</body>

</html>